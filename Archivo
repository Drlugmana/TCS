// src/utils/jurisdiction.js
export function getJurisdictionObject(p) {
  // Detectar campo vÃ¡lido
  const j =
    p?.juris ??
    p?.Jurisdiction ??
    p?.jurisdiction ??
    p?.jurisdictionDto ??
    null;

  // Si viene como string ("TCS" o "No TCS")
  if (typeof j === "string") {
    const label = j.trim().toUpperCase();
    const isTcs = label.includes("TCS") && !label.includes("NO");
    return { isTcs, label };
  }

  // Si viene como objeto (por compatibilidad)
  if (j && typeof j === "object") {
    const label = (j.label ?? j.name ?? "").toString().toUpperCase();
    const isTcs =
      typeof j.isTcs === "boolean"
        ? j.isTcs
        : label.includes("TCS") && !label.includes("NO");
    return { isTcs, label };
  }

  return { isTcs: undefined, label: "" };
}

// Filtros globales reutilizables
export const esTCS = (p) => getJurisdictionObject(p).isTcs === true;
export const esNoTCS = (p) => getJurisdictionObject(p).isTcs === false;